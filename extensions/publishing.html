<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-extensions/publishing">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<link rel="alternate" type="application/rss+xml" href="/dashboard/blog/rss.xml" title="Rancher UI DevKit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/dashboard/blog/atom.xml" title="Rancher UI DevKit Atom Feed"><title data-rh="true">Publishing an Extension | Rancher UI DevKit</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rancher.github.io/dashboard/extensions/publishing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Publishing an Extension | Rancher UI DevKit"><meta data-rh="true" name="description" content="There are currently two options for building and publishing a extensions:"><meta data-rh="true" property="og:description" content="There are currently two options for building and publishing a extensions:"><link data-rh="true" rel="icon" href="/dashboard/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rancher.github.io/dashboard/extensions/publishing"><link data-rh="true" rel="alternate" href="https://rancher.github.io/dashboard/extensions/publishing" hreflang="en"><link data-rh="true" rel="alternate" href="https://rancher.github.io/dashboard/extensions/publishing" hreflang="x-default"><link rel="stylesheet" href="/dashboard/assets/css/styles.b253649b.css">
<link rel="preload" href="/dashboard/assets/js/runtime~main.f8791740.js" as="script">
<link rel="preload" href="/dashboard/assets/js/main.b0478170.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dashboard/"><div class="navbar__logo"><img src="/dashboard/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/dashboard/img/rancher-logo-dark.svg" alt="Rancher Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">UI DevKit</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dashboard/home">Docs</a><a class="navbar__item navbar__link" href="/dashboard/blog">Blog</a><a href="https://rancher.github.io/storybook/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Components &amp; Design kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dashboard/home">Developer Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dashboard/getting-started/quickstart">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dashboard/guide/package-management">Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dashboard/code-base-works/api-resources-and-schemas">How the Code Base Works</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/dashboard/extensions/home">Extensions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Extensions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dashboard/extensions/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dashboard/extensions/extensions-getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dashboard/extensions/extensions-configuration">Extensions configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/dashboard/extensions/api/overview">Extensions API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Extensions API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/dashboard/extensions/advanced/air-gapped-environments">Advanced</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dashboard/extensions/publishing">Publishing an Extension</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/dashboard/extensions/usecases/overview">Use cases/Examples</a><button aria-label="Toggle the collapsible sidebar category &#x27;Use cases/Examples&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dashboard/storybook">Storybook</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dashboard/testing/unit-test">Testing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dashboard/terminology">Terminology</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/dashboard/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/dashboard/extensions/home"><span itemprop="name">Extensions</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Publishing an Extension</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Publishing an Extension</h1><p>There are currently two options for building and publishing a extensions:</p><ol><li>Building the Helm charts and necessary assets of an extension that can be committed into a Github or Helm repository.</li><li>Building an <a href="/dashboard/extensions/advanced/air-gapped-environments">Extension Catalog Image</a> that can be pushed or mirrored into a container registry.</li></ol><p>As discussed in the <a href="/dashboard/extensions/extensions-getting-started#creating-a-release">Getting Started</a> section, we have established a <a href="https://github.com/rancher/dashboard/tree/master/shell/creators/pkg/files/.github/workflows" target="_blank" rel="noopener noreferrer">workflow</a> using <a href="https://docs.github.com/en/actions/using-workflows/reusing-workflows" target="_blank" rel="noopener noreferrer">Github reusable workflows</a>, that automatically handles the build and publication of both the Helm charts and ECI into the Extension&#x27;s GitHub repository. However, this workflow can be omitted for a more hands-on approach to publishing Extensions.</p><blockquote><p>Note: An explanation on the workflow files can be found in the <a href="#additional-release-configuration">Additional Release Configuration</a> section.</p></blockquote><h1>Publish Script Usage</h1><p><strong><em>Usage</em></strong></p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: yarn publish-pkgs [&lt;options&gt;] [plugins]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s &lt;repo&gt;    Specify destination GitHub repository (org/name) - defaults to the git origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -b &lt;branch&gt;  Specify destination GitHub branch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t &lt;tag&gt;     Specify the Github release tag to build when a release has been tagged and published</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f           Force building the chart even if it already exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c           Build as a container image rather than publishing to Github</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p           Push container images on build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -r &lt;name&gt;    Specify destination container registry for built images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -o &lt;name&gt;    Specify destination container registry organization for built images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i &lt;prefix&gt;  Specify prefix for the built container image (default: &#x27;ui-extension-&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l           Specify Podman container build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Manually Publishing the Extension Helm Charts</h1><blockquote><p>Note: Currently, we only support publishing Extension Helm charts into a <strong>public</strong> Github repository, if you inted to deploy an extension from a private repository/registry, we recommend utilizing the <a href="#manually-publishing-an-extension-catalog-image">Extension Catalog Image</a> method.</p></blockquote><p>Building the Extension into Helm charts with the necessary assets can be accomplished with the <code>publish-pkgs</code> script declared in the extension&#x27;s <code>package.json</code>.
Running this script will bundle each extension package as a node.js app, create Helm charts with metadata needed by the <a href="https://github.com/rancher/ui-plugin-operator" target="_blank" rel="noopener noreferrer"><code>ui-plugin-operator</code></a>, and a <a href="https://helm.sh/docs/helm/helm_repo_index/" target="_blank" rel="noopener noreferrer">Helm repo index</a> to populate the Extension marketplace for installation.</p><p>After the Helm assets have been built, you will need to commit them into a publicly accessible Github repository. This repository will then need to be added into the Cluster Repositories list within a Rancher instance, that will then populate the Extension marketplace with the charts built from the previous step.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><blockquote><p>Note: This has been tested on Linux and MacOS machines</p></blockquote><p>This method requires a few tools to be installed:</p><ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">git</a></li><li><a href="https://nodejs.org/en/download" target="_blank" rel="noopener noreferrer">nodejs</a> ( &gt;= <code>12.0.0</code> &lt; <code>17.0.0</code> )</li><li><a href="https://yarnpkg.com/getting-started/install" target="_blank" rel="noopener noreferrer">yarn</a></li><li><a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq</a></li><li><a href="https://github.com/mikefarah/yq/#install" target="_blank" rel="noopener noreferrer">yq</a> ( &gt;= <code>4.0.0</code> )</li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">helm</a> ( &gt;= <code>3.0.0</code> )</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-publish-script">Running the Publish Script<a class="hash-link" href="#running-the-publish-script" title="Direct link to heading">​</a></h2><p>To start the build, run the <code>publish-pkgs</code> script with two options:</p><table><thead><tr><th>Option</th><th>Argument</th><th>Description</th></tr></thead><tbody><tr><td><code>-s</code></td><td><code>&lt;repository&gt;</code></td><td>Specifies the destination GitHub repository (org/name) - defaults to the git origin</td></tr><tr><td><code>-b</code></td><td><code>&lt;branch&gt;</code></td><td>Specifies destination GitHub branch - defaults to <code>main</code></td></tr></tbody></table><p>Example:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn publish-pkgs -s &quot;my-organization/my-extension-repo&quot; -b &quot;production&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After running the script, a number of directories will be created:</p><ul><li><code>assets</code> - Contains the packaged Extension charts for each package from <code>./charts/*</code> (e.g. <code>./assets/my-pkg/my-pkg-0.1.0.tgz</code>), used by the <code>index.yaml</code> to obtain the Chart info.</li><li><code>charts</code> - The Extension Charts, includes the <code>Chart.yaml</code> and <code>values.yaml</code> among other files.</li><li><code>extensions</code> - Contains the minified javascript bundle for the node.js app, targeted by the <code>.spec.plugin.endpoint</code> which is used by the <code>ui-plugin-operator</code> to load and cache the minified javascript.</li><li><code>index.yaml</code> - The Helm repo index file used by Helm to gather Chart information - this contains the <code>urls</code> property that targets the <code>assets/*</code> for each package.</li><li><code>tmp</code> - Contains all of the directories and <code>index.yaml</code> mentioned which allows for simple aggregation when pushing charts to a repository.</li></ul><p>These files will need to be pushed into a publically available Github repository, for example:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git add ./tmp/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m &#x27;Adding extension charts&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push origin production</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the files are accessible on Github, add the repository within the Rancher &quot;local&quot; cluster - The charts will then be available on the Extensions page, under the &quot;Available&quot; tab.</p><h1>Manually Publishing an Extension Catalog Image</h1><p>Publishing an ECI into the registry of your choice can also be accomplished with the <code>publish-pkgs</code> script declared in the extension&#x27;s <code>package.json</code>. This script will build a Docker image for each extension package, as well as a Helm chart that can be used to deploy the images. Given the option, the script can automatically push the built images and chart into a specified registry.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites-1">Prerequisites<a class="hash-link" href="#prerequisites-1" title="Direct link to heading">​</a></h2><p>Publishing an ECI has a few requirements, namely:</p><ul><li>The Extension needs to be bundled into the ECI</li><li>A registry to house the ECI</li><li>Access to this registry within the Cluster</li></ul><p>This method also requires a few tools to be installed:</p><ul><li><a href="https://www.gnu.org/software/make/" target="_blank" rel="noopener noreferrer">make</a></li><li><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">docker</a></li><li><a href="https://go.dev/dl/" target="_blank" rel="noopener noreferrer">go</a></li><li><a href="https://nodejs.org/en/download" target="_blank" rel="noopener noreferrer">nodejs</a> ( &gt;= <code>12.0.0</code> &lt; <code>17.0.0</code> )</li><li><a href="https://yarnpkg.com/getting-started/install" target="_blank" rel="noopener noreferrer">yarn</a></li><li><a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq</a></li><li><a href="https://github.com/mikefarah/yq/#install" target="_blank" rel="noopener noreferrer">yq</a> ( &gt;= <code>4.0.0</code> )</li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">helm</a> ( &gt;= <code>3.0.0</code> )</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-publish-script-1">Running the Publish Script<a class="hash-link" href="#running-the-publish-script-1" title="Direct link to heading">​</a></h2><p>You can simply run the <code>publish-pkgs</code> script with three options:</p><table><thead><tr><th>Option</th><th>Argument</th><th>Description</th></tr></thead><tbody><tr><td><code>-c</code></td><td></td><td>specifies the container build</td></tr><tr><td><code>-r</code></td><td><code>&lt;registry&gt;</code></td><td>specifies the registry where the image will be housed</td></tr><tr><td><code>-o</code></td><td><code>&lt;organization&gt;</code></td><td>specifies the organization namespace for the registry</td></tr></tbody></table><p>Example:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn publish-pkgs -c -r &lt;REGISTRY&gt; -o &lt;ORGANIZATION&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Running any of the commands above will only build your images - in order to publish the images to your registry you must either push them manually or use the script with the `-p`` option. This will automatically push your images to the designated registry.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn publish-pkgs -c -p -r &lt;REGISTRY&gt; -o &lt;ORGANIZATION&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Additional Release Configuration</h1><p>Depending on your use case, there are multiple options on building and creating releases. When building an extension within a Github repository, you have the option of utilizing an action that triggers <a href="https://github.com/rancher/dashboard/tree/master/shell/creators/pkg/files/.github/workflows" target="_blank" rel="noopener noreferrer">prebuilt workflows</a>. When added to your extension, the <code>./github/workflows</code> directory will contain the files: <code>build-extension-charts.yml</code> and <code>build-extension-catalog.yml</code>. These workflows accomplish two seperate actions:</p><ul><li><code>build-extension-charts</code> - Builds the Helm charts and necessary assets that are then published to the specified branch (defaults to <code>gh-pages</code>).<ul><li>The versioning of these builds is determined by the Extension Package <code>version</code> property found in <code>./pkg/&lt;package-name&gt;/package.json</code></li><li>Find the resuable workflow file <a href="https://github.com/rancher/dashboard/blob/master/.github/workflows/build-extension-charts.yml" target="_blank" rel="noopener noreferrer">here</a></li></ul></li><li><code>build-extension-catalog</code> - Builds and publishes the <a href="/dashboard/extensions/advanced/air-gapped-environments">Extension Catalog Image</a> (ECI) into the specified registry (defaults to <code>ghcr.io</code>), for use with private repositories or air-gapped builds.<ul><li>An ECI contains the Helm charts and assets within the image, and is determined by the main Extension <code>version</code> property found in <code>./package.json</code></li><li>Find the reusable workflow file <a href="https://github.com/rancher/dashboard/blob/master/.github/workflows/build-extension-catalog.yml" target="_blank" rel="noopener noreferrer">here</a></li></ul></li></ul><p>By default, both of these actions are triggered by pushing into the <code>main</code> branch. This may not be your disired flow, and so you can modify the workflow file to fit your needs.</p><blockquote><p>Note: Addition configuration information on the workflows can be found in the <a href="/dashboard/extensions/advanced/workflow-configuration">Workflow Configuration</a> section. </p></blockquote><blockquote><p>Note: For more information on events that trigger workflows, follow the <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows" target="_blank" rel="noopener noreferrer">Github Documentation</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab-integration">GitLab Integration<a class="hash-link" href="#gitlab-integration" title="Direct link to heading">​</a></h2><p>When building an extension that will be housed in a GitLab repository or hosted environment, there is only one option for publishing automatically - That is by utilizing the provided <a href="https://github.com/rancher/dashboard/blob/master/shell/creators/app/files/.gitlab-ci.yml" target="_blank" rel="noopener noreferrer">GitLab Pipeline CI file</a> that is generated when <a href="/dashboard/extensions/extensions-getting-started#creating-the-skeleton-app">creating the skeleton app</a>.</p><p>This pipeline will build an ECI and publish it to container registry (<code>registry.gitlab.com</code> by default) to allow for importing into Rancher Manager.
The actual pipeline jobs are defined in the <a href="https://github.com/rancher/dashboard/blob/master/.gitlab/workflows/build-extension-catalog.gitlab-ci.yml" target="_blank" rel="noopener noreferrer">Dashboard repo</a> to allow for proper versioning and to apply any updates to the pipeline without any additional work from the Extension developer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pipeline-configuration">Pipeline Configuration<a class="hash-link" href="#pipeline-configuration" title="Direct link to heading">​</a></h3><p>There are a few pipeline configuration options, mostly tied to the container registry:</p><table><thead><tr><th align="center">Variable</th><th align="center">Default</th><th>Description</th></tr></thead><tbody><tr><td align="center"><code>REGISTRY</code></td><td align="center"><code>$CI_REGISTRY</code></td><td>The Container Registry address where the ECI will be published.</td></tr><tr><td align="center"><code>REGISTRY_USER</code></td><td align="center"><code>$CI_REGISTRY_USER</code></td><td>The username to push the ECI to the Container Registry.</td></tr><tr><td align="center"><code>REGISTRY_PASSWORD</code></td><td align="center"><code>$CI_REGISTRY_PASSWORD</code></td><td>The password to push the ECI to the Container Registry.</td></tr><tr><td align="center"><code>IMAGE_NAMESPACE</code></td><td align="center"><code>$CI_PROJECT_NAMESPACE/$CI_PROJECT_NAME</code></td><td>Refers to the unique location within the Container Registry to store the ECI.</td></tr></tbody></table><blockquote><p><strong><em>WARNING:</em></strong> The default values for this configuration will <strong>only</strong> be available if the Container Registry is enabled for the project.</p></blockquote><blockquote><p><strong>Note:</strong> You can find a list of the Predefined Variables in the <a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html" target="_blank" rel="noopener noreferrer">GitLab Documentation</a>, this is where the default values used above can be found.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequence-of-events">Sequence of Events<a class="hash-link" href="#sequence-of-events" title="Direct link to heading">​</a></h3><p>The Pipeline will run automatically when a change to the root level <code>package.json</code> has been detected, which will first trigger the <code>check_version</code> stage to check for any version collisions within the specified Container Registry. If this stage is successful, the stage <code>build_catalog</code> will then build and release the ECI to the Container Registry.</p><p>Once the ECI has been published to the Container Registry, it can then be imported into the Rancher UI by following the steps in the <a href="/dashboard/extensions/advanced/air-gapped-environments#importing-the-extension-catalog-image">Importing section</a>. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="triggering-a-github-workflow-on-tagged-release">Triggering a Github Workflow on Tagged Release<a class="hash-link" href="#triggering-a-github-workflow-on-tagged-release" title="Direct link to heading">​</a></h2><p>The workflow <code>build-extension-charts</code> will create tagged releases whenever a build is published, this is accomplished by the <a href="https://github.com/helm/chart-releaser-action" target="_blank" rel="noopener noreferrer"><code>helm/chart-releaser-action</code></a>. Instead of having the workflow run before a release is tagged, you can modify the workflow file to be triggered by a <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release" target="_blank" rel="noopener noreferrer">tagged release</a>. This allows you to push code to the <code>main</code> branch and create pre-releases without worrying about the automated builds kicking off.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><p>When creating a Tagged Release, the tag name <strong><em>MUST</em></strong> match the proper Extension name depending on the type of build. As it was mentioned above, the Extension Charts (published in the specified branch) and ECI (published in the specified registry) are determined by different versions.</p><p><strong>Proper Tagged Release naming scheme:</strong></p><ul><li><em><strong>Extension Charts</strong></em>: The name <strong><em>MUST</em></strong> match the Extension Package name (determined by the package directory name) followed by the version.<ul><li>For example: <code>my-extension-package-0.1.1</code></li></ul></li><li><em><strong>Extension Catalog Image</strong></em>: The name <strong><em>MUST</em></strong> match the main Extension name (determined by the <code>name</code> property in <code>./package.json</code>) followed by the version<ul><li>For example: <code>my-extension-0.1.0</code></li></ul></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-configuration">Workflow Configuration<a class="hash-link" href="#workflow-configuration" title="Direct link to heading">​</a></h3><p>To configure the workflows you will need to modify two sections, namely the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on" target="_blank" rel="noopener noreferrer"><code>on</code></a> stanza and the <code>with</code> property in both jobs.</p><p><strong>Adding the Tagged Release event:</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">released</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: A <code>release</code> event has multiple <code>types</code> to specify, <code>released</code> will cause the workflow to only be triggered when a release is published and not considered a pre-release. More info can be found in the <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release" target="_blank" rel="noopener noreferrer">Github documentation</a>.</p></blockquote><p><strong>Modify the <code>with</code> property with the tag</strong></p><p>With a <code>release</code> event type configured, you will need to modify the <code>with</code> property within each of the workflow jobs by adding the environment variable <code>tagged_release: ${{ github.ref_name }}</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tagged_release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.ref_name </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will provide the <code>publish-pkgs</code> script within the resuable workflow with the released tag name and ensure only the specified build is accomplished.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extension-charts-workflow-example">Extension Charts Workflow Example<a class="hash-link" href="#extension-charts-workflow-example" title="Direct link to heading">​</a></h3><p>An example of modifying the <code>build-extensions.yml</code> workflow file to build when a tag is released:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># .github/workflows/build-extension-charts.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build and Release Extension Charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">released</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build-extension-artifact</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">target_branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tagged_release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.ref_name </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extension-catalog-image-workflow-example">Extension Catalog Image Workflow Example<a class="hash-link" href="#extension-catalog-image-workflow-example" title="Direct link to heading">​</a></h3><p>The same steps apply for the <code>build-extension-catalog</code> job as <code>${{ github.ref_name }}</code> will use the commit <code>ref</code> name, the release tag in this case, which triggered the action:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># .github/workflows/build-extension-catalog.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build and release Extension Catalog Image to registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">released</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">REGISTRY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build-extension-catalog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registry_target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registry_user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.actor </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tagged_release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.ref_name </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequence-of-events-1">Sequence of Events<a class="hash-link" href="#sequence-of-events-1" title="Direct link to heading">​</a></h3><p>Once the modifications have been made to the workflow files, all that is required for a build to be initiated is to create a Release tag with the desired extension to be built. This will then trigger both of the workflows, the <code>parse-ext-name</code> script will determine if the provided tag name matches either the main Extension name or one of the Extension packages names.</p><p>If the Tagged Release does not match the main Extension name, the ECI build will be canceled. Alternatively, if the Tagged Release name does not match an Extension package name, it will be skipped.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-03-26T17:52:41.000Z">Mar 26, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/dashboard/extensions/advanced/yarn-link"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using yarn link</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dashboard/extensions/usecases/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Usecases/Examples</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#running-the-publish-script" class="table-of-contents__link toc-highlight">Running the Publish Script</a></li><li><a href="#prerequisites-1" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#running-the-publish-script-1" class="table-of-contents__link toc-highlight">Running the Publish Script</a></li><li><a href="#gitlab-integration" class="table-of-contents__link toc-highlight">GitLab Integration</a><ul><li><a href="#pipeline-configuration" class="table-of-contents__link toc-highlight">Pipeline Configuration</a></li><li><a href="#sequence-of-events" class="table-of-contents__link toc-highlight">Sequence of Events</a></li></ul></li><li><a href="#triggering-a-github-workflow-on-tagged-release" class="table-of-contents__link toc-highlight">Triggering a Github Workflow on Tagged Release</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#workflow-configuration" class="table-of-contents__link toc-highlight">Workflow Configuration</a></li><li><a href="#extension-charts-workflow-example" class="table-of-contents__link toc-highlight">Extension Charts Workflow Example</a></li><li><a href="#extension-catalog-image-workflow-example" class="table-of-contents__link toc-highlight">Extension Catalog Image Workflow Example</a></li><li><a href="#sequence-of-events-1" class="table-of-contents__link toc-highlight">Sequence of Events</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Rancher. All rights reserved.</div></div></div></footer></div>
<script src="/dashboard/assets/js/runtime~main.f8791740.js"></script>
<script src="/dashboard/assets/js/main.b0478170.js"></script>
</body>
</html>